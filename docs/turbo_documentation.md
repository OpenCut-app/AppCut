# Turborepo Configuration Documentation: `turbo.json`

This document describes the `turbo.json` file, which configures Turborepo for the OpenCut monorepo. Turborepo is a high-performance build system for JavaScript and TypeScript codebases.

## Overview

`turbo.json` defines how Turborepo should execute tasks (scripts) across the monorepo's workspaces. It optimizes build times by caching previous build outputs, running tasks in parallel, and understanding dependencies between packages.

## Configuration Details

```json
{
    "$schema": "https://turborepo.com/schema.json",
    "tasks": {
      "build": {
        "dependsOn": ["^build"],
        "outputs": [".next/**", "!.next/cache/**"]
      },
      "check-types": {
        "dependsOn": ["^check-types"]
      },
      "dev": {
        "persistent": true,
        "cache": false
      }
    }
  }
```

## Sections Explained

*   `$schema`: Specifies the JSON schema for validation, ensuring the configuration file adheres to Turborepo's structure.

*   `tasks`: This object defines how specific npm scripts (tasks) should be handled by Turborepo.

    ### `build` task
    *   `dependsOn`: `["^build"]`
        *   This tells Turborepo that before building a package, it should first build all of its dependencies. The `^` symbol indicates that it should look for the `build` script in the dependencies' `package.json` files.
    *   `outputs`: `[".next/**", "!.next/cache/**"]`
        *   This specifies which files and directories generated by the `build` task should be cached. `.next/**` includes all files within the `.next` directory (common for Next.js builds). `!.next/cache/**` explicitly excludes the cache directory itself from being cached, as it contains temporary files that don't need to be persisted.

    ### `check-types` task
    *   `dependsOn`: `["^check-types"]`
        *   Similar to `build`, this ensures that type checking is performed on dependencies before the current package, maintaining type safety across the monorepo.

    ### `dev` task
    *   `persistent`: `true`
        *   This indicates that the `dev` task should run continuously (e.g., a development server) and not terminate after completion. Turborepo will keep these processes running in the background.
    *   `cache`: `false`
        *   This tells Turborepo *not* to cache the output of the `dev` task. Development servers typically produce logs and temporary files that are not meant for caching and would only slow down the development process if cached.

## Purpose

This `turbo.json` file is crucial for optimizing the development and build workflows in the OpenCut monorepo. It enables:

*   **Faster Builds:** By caching build outputs and only rebuilding what's changed.
*   **Correct Order of Operations:** Ensuring that dependent packages are built or type-checked before their consumers.
*   **Efficient Development:** By allowing development servers to run persistently without unnecessary caching.

It centralizes the configuration for how tasks are executed across the multiple `apps` and `packages` within the OpenCut project.